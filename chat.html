<!-- <!DOCTYPE html>
<html>
<head>
    <title>Chat</title>
</head>
<body>
    <h1>Welcome to the Chat, <%= username %></h1>
</body>
</html>
 -->











<!DOCTYPE html>
<html>
<head>
    <title>Simple Chat</title>
    <style>
        body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

#messages {
    list-style-type: none;
    margin: 0;
    padding: 0;
}

#messages li {
    padding: 8px 12px;
    border-bottom: 1px solid #ddd;
}

#messages li:last-child {
    border-bottom: none;
}

#form {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background-color: #f1f1f1;
    padding: 10px;
    box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
}

#input {
    width: calc(100% - 80px);
    padding: 6px 10px;
    margin-right: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 14px;
}

button {
    padding: 6px 10px;
    border: none;
    background-color: #4CAF50;
    color: white;
    font-size: 14px;
    cursor: pointer;
    border-radius: 4px;
}

    </style>
</head>
<body>
    <div id="username-container">
        <label for="username">Enter your username:</label>
        <input id="username" autocomplete="off" placeholder="Username" />
        <button id="submit-username">Submit</button>
    </div>
    <div id="users-container">
        <h3>Users Online:</h3>
        <ul id="users"></ul>
    </div>
    <ul id="messages"></ul>
    <form id="form" action="">
        <input id="input" autocomplete="off" placeholder="Type a message..." /><button>Send</button>
    </form>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io();

        var form = document.getElementById('form');
        var input = document.getElementById('input');
        var messages = document.getElementById('messages');
        var usernameInput = document.getElementById('username');
        var submitUsernameBtn = document.getElementById('submit-username');
        var usersContainer = document.getElementById('users');
        
        var username = '';

        submitUsernameBtn.addEventListener('click', function(e) {
            e.preventDefault();
            if (usernameInput.value) {
                username = usernameInput.value;
                document.getElementById('username-container').style.display = 'none';
                socket.emit('new user', username);
            }
        });

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            if (input.value) {
                socket.emit('chat message', { username: username, message: input.value });
                input.value = '';
            }
        });

        socket.on('chat message', function(data) {
            var item = document.createElement('li');
            item.textContent = data.username + ': ' + data.message;
            messages.appendChild(item);
            window.scrollTo(0, document.body.scrollHeight);
        });

        socket.on('users online', function(users) {
            usersContainer.innerHTML = '';
            if (users.length > 0) {
                users.forEach(function(user) {
                    var item = document.createElement('li');
                    item.textContent = user;
                    usersContainer.appendChild(item);
                });
            } else {
                var item = document.createElement('li');
                item.textContent = 'No users online';
                usersContainer.appendChild(item);
            }
        });
    </script>
</body>
</html>
